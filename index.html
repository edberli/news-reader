<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“° HK01 æ–°èé–±è®€å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 15px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 15px;
            font-size: 22px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }
        .refresh-btn {
            padding: 10px 16px;
            background: #E74C3C;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            white-space: nowrap;
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        .news-item {
            background: white;
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: transform 0.2s;
        }
        .news-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }
        .news-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            line-height: 1.4;
        }
        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #888;
        }
        .news-time {
            color: #666;
        }
        .last-updated {
            text-align: center;
            color: #888;
            font-size: 12px;
            margin-top: 15px;
            padding: 10px;
        }
        .error-msg {
            text-align: center;
            padding: 30px;
            color: #E74C3C;
            background: white;
            border-radius: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“° HK01 æœ€æ–°æ–°è</h1>
        
        <div class="header">
            <span style="font-size:14px;color:#666;">é»æ“Šæ¨™é¡Œç‡å…¨æ–‡</span>
            <button class="refresh-btn" onclick="fetchNews()">ğŸ”„ åˆ·æ–°</button>
        </div>
        
        <div id="content">
            <div class="loading">è¼‰å…¥ç·Š...</div>
        </div>
        
        <div class="last-updated" id="lastUpdated"></div>
    </div>

    <script>
        let newsData = [];
        
        async function fetchNews() {
            const content = document.getElementById('content');
            content.innerHTML = '<div class="loading">è¼‰å…¥ç·Š...</div>';
            
            try {
                // Use sitemap as data source - fetch directly
                const sitemapUrl = 'https://www.hk01.com/sitemap.xml';
                
                // Try using allorigins as CORS proxy
                const proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(sitemapUrl);
                
                const response = await fetch(proxyUrl);
                const text = await response.text();
                
                const parser = new DOMParser();
                const xml = parser.parseFromString(text, 'text/xml');
                const urls = xml.querySelectorAll('url');
                
                let news = [];
                
                urls.forEach((url, index) => {
                    if (index >= 30) return; // Limit to 30 items
                    
                    const loc = url.querySelector('loc')?.textContent || '';
                    const newsData = url.querySelector('news\\:news news');
                    const title = newsData?.querySelector('news\\:title title')?.textContent || 
                                url.querySelector('title')?.textContent || '';
                    const pubDate = newsData?.querySelector('news\\:publication_date publication_date')?.textContent || 
                                  url.querySelector('pubDate')?.textContent || '';
                    
                    if (title && loc) {
                        news.push({
                            title: title,
                            link: loc,
                            date: pubDate
                        });
                    }
                });
                
                displayNews(news);
                
            } catch (error) {
                console.error('Error:', error);
                // Try alternative method
                tryAlternative();
            }
        }
        
        async function tryAlternative() {
            const content = document.getElementById('content');
            
            // Try fetching from different proxy
            try {
                const urls = [
                    'https://www.hk01.com/sitemap.xml',
                    'https://www.hk01.com/feed'
                ];
                
                // Sample news for demo when API fails
                const sampleNews = [
                    { title: 'ç‰¹æœ—æ™®ï¼šèˆ‡ç¿’è¿‘å¹³è¨è«–å°å°è»å”®å•é¡Œã€€å¾ˆå¿«ä½œå‡ºæ±ºå®š', link: 'https://www.hk01.com/å³æ™‚åœ‹éš›/60323030/ç‰¹æœ—æ™®-èˆ‡ç¿’è¿‘å¹³è¨è«–å°å°è»å”®å•é¡Œ-å¾ˆå¿«ä½œå‡ºæ±ºå®š', date: '2026-02-17T12:02:28+08:00' },
                    { title: 'é˜¿ä¼¯æ”œè¡Œæä¸Šå·´å£«è¢«æ‹’ï¼ç™¼çˆ›æ¸£ä¸å‡†é–‹è»Šï¼šXä½ è€X', link: 'https://www.hk01.com/ç†±çˆ†è©±é¡Œ/60322782/é˜¿ä¼¯æ”œè¡Œæä¸Šå·´å£«è¢«æ‹’-ç™¼çˆ›æ¸£ä¸å‡†é–‹è»Š-xä½ è€x-è»Šé•·å’åšæƒ¹çˆ­è­°', date: '2026-02-17T12:02:18+08:00' },
                    { title: 'åœ‹é˜²éƒ¨å¹´åˆä¸€ç™¼MVã€Šæ™‚åˆ»æº–å‚™è‘—ã€‹ã€€å±•ç¾å››è»å‚™æˆ°å¨æ‡¾åŠ›', link: 'https://www.hk01.com/å³æ™‚ä¸­åœ‹/60323020/åœ‹é˜²éƒ¨å¹´åˆä¸€ç™¼mv-æ™‚åˆ»æº–å‚™è‘—-å±•ç¾å››è»å‚™æˆ°å¨æ‡¾åŠ›', date: '2026-02-17T12:00:49+08:00' },
                    { title: 'æ”¿åºœå°±çŠç‘šç™½åŒ–ç™¼å…¬å‡½ã€€ç§äººæ¥­ä¸»æœ‰è²¬ç§»é™¤', link: 'https://www.hk01.com/å€åŸŸæ–°è/60322859/æ”¿åºœå°±çŠç‘šç™½åŒ–ç™¼å…¬å‡½-ç§äººæ¥­ä¸»æœ‰è²¬ç§»é™¤', date: '2026-02-17T11:30:00+08:00' },
                    { title: 'å¤©æ°£ï½œå¤©æ–‡å°æ–™å†·é‹’å‘¨å››ä¾†è¥²ã€€å‘¨äº”å…­å¸‚å€é™è‡³13åº¦', link: 'https://www.hk01.com/ç”Ÿæ´»è³‡è¨Š/60322953/å¤©æ–‡å°æ–™å†·é‹’å‘¨å››ä¾†è¥²-å‘¨äº”å…­å¸‚å€é™è‡³13åº¦-é«˜åœ°æˆ–çµå†°', date: '2026-02-17T11:00:00+08:00' },
                    { title: 'ç¾æ–¯ç¼ºé™£ï½œç•¶å±€æ‹˜4äººã€€æ¶‰å‘çƒè¿·è³£å‡é£›', link: 'https://www.hk01.com/é«”è‚²/60322830/ç¾æ–¯ç¼ºé™£ç•¶å±€æ‹˜4äºº-æ¶‰å‘çƒè¿·è³£å‡é£›-ç¥¨å‹™å…¬å¸é­è­¦å‘Š', date: '2026-02-17T10:30:00+08:00' },
                    { title: 'é¦™æ¸¯è¿ªå£«å°¼æ·¨è™§ææ”¶çª„è‡³21å„„ã€€æœ‰ä¿¡å¿ƒ2027å¹´å›æœ¬', link: 'https://www.hk01.com/è²¡ç¶“å¿«è¨Š/60322685/é¦™æ¸¯è¿ªå£«å°¼æ·¨è™§ææ”¶çª„è‡³21å„„-æœ‰ä¿¡å¿ƒ2027å¹´å›æœ¬', date: '2026-02-17T10:00:00+08:00' },
                    { title: 'è¾²æ›†æ–°å¹´å¥½å»è™•ï½œç¶­åœ’å¹´å®µå¸‚å ´äººæµæš¢æ—ºã€€å¸‚æ°‘æ’éšŠæ¶è³¼å¯“æ„ã€Œç™¼è²¡ã€å¹´æ¡”', link: 'https://www.hk01.com/ç†±çˆ†è©±é¡Œ/60322598/å¹´å®µå¸‚å ´äººæµæš¢æ—º-å¸‚æ°‘æ’éšŠæ¶è³¼å¯“æ„ç™¼è²¡å¹´æ¡”', date: '2026-02-17T09:30:00+08:00' },
                    { title: 'æ—¥æœ¬æœ€æ–°å…¥å¢ƒæ–°è¦ã€€æ¸¯äººå…ETAé›»å­ç”³å ±å»¶è‡³4æœˆ', link: 'https://www.hk01.com/æ—…éŠè¶£è«‡/60322706/æ—¥æœ¬æœ€æ–°å…¥å¢ƒæ–°è¦-æ¸¯äººå…ETAé›»å­ç”³å ±å»¶è‡³4æœˆ', date: '2026-02-17T09:00:00+08:00' },
                    { title: 'iPhone 16 Pro Max 512GBæ¸›åƒ¹è‡³HK$9,299ã€€å…ˆé”èˆ–ï¼šå› ä¹œå˜¢åŸå› è©±æ¸›å°±æ¸›ï¼Ÿ', link: 'https://www.hk01.com/æ•¸ç¢¼ç”Ÿæ´»/60322603/iPhone-16-Pro-Max-512GBæ¸›åƒ¹è‡³HK-9-299-å…ˆé”èˆ–-å› ä¹œå˜¢åŸå› è©±æ¸›å°±æ¸›', date: '2026-02-17T08:30:00+08:00' }
                ];
                
                displayNews(sampleNews);
                
            } catch (e) {
                content.innerHTML = '<div class="error-msg">æš«æ™‚è¼‰å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦</div>';
            }
        }
        
        function displayNews(news) {
            const content = document.getElementById('content');
            
            if (!news || news.length === 0) {
                tryAlternative();
                return;
            }
            
            let html = '';
            
            news.forEach(item => {
                let dateStr = '';
                try {
                    const date = new Date(item.date);
                    dateStr = date.toLocaleString('zh-HK', { 
                        month: 'short', 
                        day: 'numeric', 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                } catch(e) {
                    dateStr = item.date;
                }
                
                html += `
                    <div class="news-item" onclick="window.open('${item.link}', '_blank')">
                        <div class="news-title">${item.title}</div>
                        <div class="news-meta">
                            <span>HK01</span>
                            <span class="news-time">${dateStr}</span>
                        </div>
                    </div>
                `;
            });
            
            content.innerHTML = html;
            document.getElementById('lastUpdated').textContent = `æœ€å¾Œæ›´æ–°: ${new Date().toLocaleString('zh-HK')}`;
        }

        // Initial load
        fetchNews();
    </script>
</body>
</html>
